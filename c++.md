# c++常见问题

## c++的虚函数表是什么时候生成的？

	虚函数表会在遇到类的第一个非内联的虚函数定义时生成。
	
	因为c++的类是分成声明和定义两个部分的。
	声明写在头文件中，定义写在.cpp文件中。
	定义可以分多cpp文件来写，gcc又是以cpp文件做为编译单元的。
	因此如果gcc在编译两个cpp时都会生成虚函数表的话，就会导致链接时出现符号重复定义的错误。
	
	因此gcc提出了一个Key Function的概念————类的第一非内联虚方法。
	只有遇到Key Function的定义时才会生成虚方法表。
	
## 如何链接两个字符串常量
	
	C++ 会自动把两个相邻的字符串常量合并为一个。
	如：
		"hello" " world" 会合并为 "hello world"
	
## 宏定义中的#和##有什么作用。

	在宏定义中#和##都是运算符号。
	
	#是字符串化运算符。可以将宏参数转换为字符串常量。
	使用方法:
		#<宏参数>
	例如：
	   有宏 #define STRINGIZE(ARG) #ARG
	   运行 STRINGIZE(a+b) 得到 "a+b"
	   
	##是标记(Token)合并运算符。可以将前后两个相连的标记合并成一个。 如果##前后不是合法的标记，会编译出错。
	例如：
		#define TOKEN_MERGE(A, B) A##B
		TOKEN_MERGE(a, 1) 得到 a1
	
	##__VA_ARGS__在可变参数宏中有特殊的用途
	如果在可变参数宏中__VA_ARGS__为空， 加上##可以去掉前面分隔符。
	
	例如:
		#define LOG(fmt, ...) printf(fmt, ##__VA_ARGS__)
		
		LOG(fmt) 得到 printf(fmt), 如果不加## 得到的是 printf(fmt,) 编译会出错。
		
		
	
	   
	   
      
	
	
	
